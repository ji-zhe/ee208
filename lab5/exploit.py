import requests
import threading

i = 6102762343
ilock = threading.Lock()
flock = threading.Lock()

def working():
    global i
    while True:
        temp = i
        try:
            r = requests.head("https://www.quanjing.com/imgbuy/QJ"+str(temp)+".html", headers={'User-Agent':'Chrome/1.0.0'}, stream = True, allow_redirects=False)
            if r.status_code == 200:
                flock.acquire()
                f = open('img_page_urls_1.txt','a')
                f.write("https://www.quanjing.com/imgbuy/QJ"+str(temp)+".html\n")
                f.close()
                flock.release()
                print('AC:',temp)
            if temp%100 == 0:
                print("\tnow", temp)
            ilock.acquire()
            i += 1
            ilock.release()
        except:
            pass


tlist = list()
for num in range(7):
    tlist.append(threading.Thread(target=working))
for t in tlist:
    t.start()
for t in tlist:
    t.join()